FROM php:8.0-cli-alpine

RUN apk update && \
    apk add --no-cache pcre-dev $PHPIZE_DEPS postgresql-dev composer && \
    pecl install -o -f redis && \
    rm -rf /tmp/pear && \
    docker-php-ext-install pdo pdo_pgsql && \
    docker-php-ext-enable redis && \
    apk del $PHPIZE_DEPS

ENV COMPOSER_MEMORY_LIMIT -1